{"ast":null,"code":"import _objectSpread from\"C:/Users/belya/Cursor projects/Budget tracker/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{BrowserRouter,Route,Routes}from'react-router-dom';import axios from'axios';import'./App.css';import LoginButton from'./components/LoginButton';import ProtectedRoute from'./components/ProtectedRoute';import{useDispatch,useSelector}from'react-redux';import{loginSuccess,logout}from'./store/authSlice';import Header from'./components/Header';import{ROLES}from'./config/roles';import{Toaster}from'react-hot-toast';import ErrorBoundary from'./components/ErrorBoundary';// Configure axios base URL and defaults\naxios.defaults.baseURL=process.env.REACT_APP_API_URL||'http://localhost:5000';axios.defaults.withCredentials=true;// Import your components\nimport TaskInput from'./components/TaskInput';import GoalList from'./components/GoalList';import TaskList from'./components/TaskList';import AdminRoleManager from'./components/AdminRoleManager';import GoalSetting from'./components/GoalSetting';import GoalInput from'./components/GoalInput';import PrivacyPolicy from'./components/PrivacyPolicy';import TermsOfService from'./components/TermsOfService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const dispatch=useDispatch();const{isAuthenticated,userRole}=useSelector(state=>state.auth);const[activeTab,setActiveTab]=useState('list');const[isLoading,setIsLoading]=useState(true);const[user,setUser]=useState(null);const[refreshTrigger,setRefreshTrigger]=useState(0);const[tasks,setTasks]=useState([]);const[employees,setEmployees]=useState([]);const checkAuthStatus=useCallback(async()=>{try{const response=await axios.get('/auth/status');console.log('Full Auth Status Response:',response.data);// Explicitly log detailed authentication status\nconst detailedStatus={authenticated:response.data.authenticated,user:response.data.user,role:response.data.role};console.log('Detailed Auth Status:',detailedStatus);// Dispatch login success with explicit role handling\nif(response.data.authenticated){var _response$data$user,_response$data$user2,_response$data$user2$,_response$data$user2$2;const userEmail=((_response$data$user=response.data.user)===null||_response$data$user===void 0?void 0:_response$data$user.email)||((_response$data$user2=response.data.user)===null||_response$data$user2===void 0?void 0:(_response$data$user2$=_response$data$user2.emails)===null||_response$data$user2$===void 0?void 0:(_response$data$user2$2=_response$data$user2$[0])===null||_response$data$user2$2===void 0?void 0:_response$data$user2$2.value)||'Unknown Email';// Robust role processing\nconst serverRole=response.data.role;const userRole=typeof serverRole==='object'&&Object.keys(serverRole).length===0?userEmail.toLowerCase()==='belyakovvladimirs@gmail.com'?'admin':userEmail.toLowerCase()==='vladimirbelyakov1981@gmail.com'?'admin':'employee':serverRole||'employee';console.log('Processed User Role:',userRole);dispatch(loginSuccess({user:_objectSpread(_objectSpread({},response.data.user),{},{email:userEmail}),authenticated:true,userRole:typeof userRole==='string'?userRole.toLowerCase():'employee'}));console.log('Dispatched Login Success with Role:',userRole);setIsLoading(false);}else{dispatch(logout());setIsLoading(false);}}catch(error){console.error('Error checking auth status:',error);// More detailed error handling\nif(error.response){console.error('Error response data:',error.response.data);console.error('Error response status:',error.response.status);console.error('Error response headers:',error.response.headers);}else if(error.request){console.error('No response received:',error.request);}else{console.error('Error setting up request:',error.message);}dispatch(logout());setIsLoading(false);}},[dispatch]);useEffect(()=>{checkAuthStatus();},[checkAuthStatus]);useEffect(()=>{const fetchInitialData=async()=>{try{const[tasksRes,employeesRes]=await Promise.all([axios.get('http://localhost:5000/api/tasks',{withCredentials:true,validateStatus:status=>status===200||status===401}),axios.get('http://localhost:5000/api/employees',{withCredentials:true,validateStatus:status=>status===200||status===401})]);// Handle tasks response\nif(tasksRes.status===200){setTasks(tasksRes.data);}else{console.warn('Unauthorized to fetch tasks');setTasks([]);}// Handle employees response\nif(employeesRes.status===200){setEmployees(employeesRes.data);}else{console.warn('Unauthorized to fetch employees');setEmployees([]);}}catch(error){console.error('Error fetching initial data:',error);// Check if the error is due to authentication\nif(error.response&&error.response.status===401){dispatch(logout());setIsLoading(false);}else{alert('An error occurred while fetching data. Please try again later.');}setTasks([]);setEmployees([]);}};// Ensure both isAuthenticated and userRole are truthy\nif(isAuthenticated&&userRole){fetchInitialData();}},[isAuthenticated,userRole,dispatch]);const renderMainContent=()=>{console.log('Rendering Main Content:',{isAuthenticated,activeTab,userRole});if(!isAuthenticated){return/*#__PURE__*/_jsx(LoginButton,{});}switch(activeTab){case'list':return/*#__PURE__*/_jsx(TaskList,{refreshTrigger:refreshTrigger,tasks:tasks,employees:employees});case'input':return/*#__PURE__*/_jsx(TaskInput,{onDataSaved:()=>setRefreshTrigger(prev=>prev+1),tasks:tasks,employees:employees,setTasks:setTasks,setEmployees:setEmployees});case'admin':if([ROLES.ADMIN,ROLES.MANAGER].includes(userRole)){return/*#__PURE__*/_jsx(AdminRoleManager,{currentUserRole:userRole});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-red-600\",children:\"Access Denied: Insufficient Permissions\"});}default:return null;}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsx(BrowserRouter,{future:{v7_startTransition:true,v7_relativeSplatPath:true},children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-right\",toastOptions:{success:{duration:3000},error:{duration:5000}}}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:renderMainContent()}),!isAuthenticated?/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center min-h-[60vh]\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-8 text-gray-800\",children:\"Welcome to Budget Tracker\"}),/*#__PURE__*/_jsx(LoginButton,{className:\"transform scale-125 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition duration-200\"})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/tasks\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:[ROLES.ADMIN,ROLES.MANAGER,ROLES.EMPLOYEE],isAuthenticated:isAuthenticated,userRole:userRole,children:/*#__PURE__*/_jsx(TaskList,{refreshTrigger:refreshTrigger,tasks:tasks,employees:employees})})}),/*#__PURE__*/_jsx(Route,{path:\"/tasks/input\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:[ROLES.ADMIN,ROLES.MANAGER,ROLES.EMPLOYEE],isAuthenticated:isAuthenticated,userRole:userRole,children:/*#__PURE__*/_jsx(TaskInput,{onDataSaved:()=>setRefreshTrigger(prev=>prev+1),tasks:tasks,employees:employees,setTasks:setTasks,setEmployees:setEmployees})})}),/*#__PURE__*/_jsx(Route,{path:\"/goals\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:[ROLES.ADMIN,ROLES.MANAGER],isAuthenticated:isAuthenticated,userRole:userRole,children:/*#__PURE__*/_jsx(GoalList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/goals/setting\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:[ROLES.ADMIN,ROLES.MANAGER],isAuthenticated:isAuthenticated,userRole:userRole,children:/*#__PURE__*/_jsx(GoalSetting,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/goals/input\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:[ROLES.ADMIN,ROLES.MANAGER],isAuthenticated:isAuthenticated,userRole:userRole,children:/*#__PURE__*/_jsx(GoalInput,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/roles\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:[ROLES.ADMIN],isAuthenticated:isAuthenticated,userRole:userRole,children:/*#__PURE__*/_jsx(AdminRoleManager,{currentUserRole:userRole})})}),/*#__PURE__*/_jsx(Route,{path:\"/privacy-policy\",element:/*#__PURE__*/_jsx(PrivacyPolicy,{})}),/*#__PURE__*/_jsx(Route,{path:\"/terms-of-service\",element:/*#__PURE__*/_jsx(TermsOfService,{})}),/*#__PURE__*/_jsx(Route,{path:\"/unauthorized\",element:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-red-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-md text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-red-600 mb-4\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-6\",children:\"You do not have permission to access this page.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/',className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition\",children:\"Return to Home\"})]})})})]})]})})})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","BrowserRouter","Route","Routes","axios","LoginButton","ProtectedRoute","useDispatch","useSelector","loginSuccess","logout","Header","ROLES","Toaster","ErrorBoundary","defaults","baseURL","process","env","REACT_APP_API_URL","withCredentials","TaskInput","GoalList","TaskList","AdminRoleManager","GoalSetting","GoalInput","PrivacyPolicy","TermsOfService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","dispatch","isAuthenticated","userRole","state","auth","activeTab","setActiveTab","isLoading","setIsLoading","user","setUser","refreshTrigger","setRefreshTrigger","tasks","setTasks","employees","setEmployees","checkAuthStatus","response","get","console","log","data","detailedStatus","authenticated","role","_response$data$user","_response$data$user2","_response$data$user2$","_response$data$user2$2","userEmail","email","emails","value","serverRole","Object","keys","length","toLowerCase","_objectSpread","error","status","headers","request","message","fetchInitialData","tasksRes","employeesRes","Promise","all","validateStatus","warn","alert","renderMainContent","onDataSaved","prev","ADMIN","MANAGER","includes","currentUserRole","className","children","future","v7_startTransition","v7_relativeSplatPath","position","toastOptions","success","duration","path","element","allowedRoles","EMPLOYEE","onClick","window","location","href"],"sources":["C:/Users/belya/Cursor projects/Budget tracker/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { BrowserRouter, Route, Routes } from 'react-router-dom';\nimport axios from 'axios';\nimport './App.css';\nimport LoginButton from './components/LoginButton';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loginSuccess, logout } from './store/authSlice';\nimport Header from './components/Header';\nimport { ROLES } from './config/roles';\nimport { Toaster } from 'react-hot-toast';\nimport ErrorBoundary from './components/ErrorBoundary';\n\n// Configure axios base URL and defaults\naxios.defaults.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\naxios.defaults.withCredentials = true;\n\n// Import your components\nimport TaskInput from './components/TaskInput';\nimport GoalList from './components/GoalList';\nimport TaskList from './components/TaskList';\nimport AdminRoleManager from './components/AdminRoleManager';\nimport GoalSetting from './components/GoalSetting';\nimport GoalInput from './components/GoalInput';\nimport PrivacyPolicy from './components/PrivacyPolicy';\nimport TermsOfService from './components/TermsOfService';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const { isAuthenticated, userRole } = useSelector((state) => state.auth);\n  const [activeTab, setActiveTab] = useState('list');\n  const [isLoading, setIsLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  const [tasks, setTasks] = useState([]);\n  const [employees, setEmployees] = useState([]);\n\n  const checkAuthStatus = useCallback(async () => {\n    try {\n      const response = await axios.get('/auth/status');\n      console.log('Full Auth Status Response:', response.data);\n      \n      // Explicitly log detailed authentication status\n      const detailedStatus = {\n        authenticated: response.data.authenticated,\n        user: response.data.user,\n        role: response.data.role\n      };\n      console.log('Detailed Auth Status:', detailedStatus);\n\n      // Dispatch login success with explicit role handling\n      if (response.data.authenticated) {\n        const userEmail = response.data.user?.email || \n          response.data.user?.emails?.[0]?.value || \n          'Unknown Email';\n\n        // Robust role processing\n        const serverRole = response.data.role;\n        const userRole = \n          (typeof serverRole === 'object' && Object.keys(serverRole).length === 0) \n            ? (userEmail.toLowerCase() === 'belyakovvladimirs@gmail.com' \n                ? 'admin' \n                : userEmail.toLowerCase() === 'vladimirbelyakov1981@gmail.com'\n                  ? 'admin'\n                  : 'employee')\n            : (serverRole || 'employee');\n\n        console.log('Processed User Role:', userRole);\n\n        dispatch(loginSuccess({\n          user: {\n            ...response.data.user,\n            email: userEmail\n          },\n          authenticated: true,\n          userRole: typeof userRole === 'string' \n            ? userRole.toLowerCase() \n            : 'employee'\n        }));\n\n        console.log('Dispatched Login Success with Role:', userRole);\n        setIsLoading(false);\n      } else {\n        dispatch(logout());\n        setIsLoading(false);\n      }\n    } catch (error) {\n      console.error('Error checking auth status:', error);\n      \n      // More detailed error handling\n      if (error.response) {\n        console.error('Error response data:', error.response.data);\n        console.error('Error response status:', error.response.status);\n        console.error('Error response headers:', error.response.headers);\n      } else if (error.request) {\n        console.error('No response received:', error.request);\n      } else {\n        console.error('Error setting up request:', error.message);\n      }\n      \n      dispatch(logout());\n      setIsLoading(false);\n    }\n  }, [dispatch]);\n\n  useEffect(() => {\n    checkAuthStatus();\n  }, [checkAuthStatus]);\n\n  useEffect(() => {\n    const fetchInitialData = async () => {\n      try {\n        const [tasksRes, employeesRes] = await Promise.all([\n          axios.get('http://localhost:5000/api/tasks', { \n            withCredentials: true,\n            validateStatus: (status) => status === 200 || status === 401 \n          }),\n          axios.get('http://localhost:5000/api/employees', { \n            withCredentials: true,\n            validateStatus: (status) => status === 200 || status === 401 \n          })\n        ]);\n        \n        // Handle tasks response\n        if (tasksRes.status === 200) {\n          setTasks(tasksRes.data);\n        } else {\n          console.warn('Unauthorized to fetch tasks');\n          setTasks([]);\n        }\n        \n        // Handle employees response\n        if (employeesRes.status === 200) {\n          setEmployees(employeesRes.data);\n        } else {\n          console.warn('Unauthorized to fetch employees');\n          setEmployees([]);\n        }\n      } catch (error) {\n        console.error('Error fetching initial data:', error);\n        \n        // Check if the error is due to authentication\n        if (error.response && error.response.status === 401) {\n          dispatch(logout());\n          setIsLoading(false);\n        } else {\n          alert('An error occurred while fetching data. Please try again later.');\n        }\n        \n        setTasks([]);\n        setEmployees([]);\n      }\n    };\n    \n    // Ensure both isAuthenticated and userRole are truthy\n    if (isAuthenticated && userRole) {\n      fetchInitialData();\n    }\n  }, [isAuthenticated, userRole, dispatch]);\n\n  const renderMainContent = () => {\n    console.log('Rendering Main Content:', {\n      isAuthenticated,\n      activeTab,\n      userRole\n    });\n\n    if (!isAuthenticated) {\n      return <LoginButton />;\n    }\n\n    switch (activeTab) {\n      case 'list':\n        return <TaskList \n          refreshTrigger={refreshTrigger}\n          tasks={tasks}\n          employees={employees}\n        />;\n      case 'input':\n        return <TaskInput \n          onDataSaved={() => setRefreshTrigger(prev => prev + 1)}\n          tasks={tasks}\n          employees={employees}\n          setTasks={setTasks}\n          setEmployees={setEmployees}\n        />;\n      case 'admin':\n        if ([ROLES.ADMIN, ROLES.MANAGER].includes(userRole)) {\n          return <AdminRoleManager currentUserRole={userRole} />;\n        } else {\n          return (\n            <div className=\"text-center text-red-600\">\n              Access Denied: Insufficient Permissions\n            </div>\n          );\n        }\n      default:\n        return null;\n    }\n  };\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <ErrorBoundary>\n      <BrowserRouter\n        future={{\n          v7_startTransition: true,\n          v7_relativeSplatPath: true,\n        }}\n      >\n        <div className=\"min-h-screen bg-gray-100\">\n          <Toaster \n            position=\"top-right\" \n            toastOptions={{\n              success: { duration: 3000 },\n              error: { duration: 5000 }\n            }} \n          />\n          <Header />\n          <main className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\n            <ErrorBoundary>\n              <Routes>\n                <Route \n                  path=\"/\" \n                  element={renderMainContent()}\n                />\n                {!isAuthenticated ? (\n                  <Route path=\"*\" element={\n                    <div className=\"flex flex-col items-center justify-center min-h-[60vh]\">\n                      <h1 className=\"text-2xl font-bold mb-8 text-gray-800\">Welcome to Budget Tracker</h1>\n                      <LoginButton className=\"transform scale-125 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition duration-200\" />\n                    </div>\n                  } />\n                ) : (\n                  <>\n                    <Route path=\"/tasks\" element={\n                      <ProtectedRoute \n                        allowedRoles={[ROLES.ADMIN, ROLES.MANAGER, ROLES.EMPLOYEE]}\n                        isAuthenticated={isAuthenticated}\n                        userRole={userRole}\n                      >\n                        <TaskList \n                          refreshTrigger={refreshTrigger}\n                          tasks={tasks}\n                          employees={employees}\n                        />\n                      </ProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/tasks/input\" element={\n                      <ProtectedRoute\n                        allowedRoles={[ROLES.ADMIN, ROLES.MANAGER, ROLES.EMPLOYEE]}\n                        isAuthenticated={isAuthenticated}\n                        userRole={userRole}\n                      >\n                        <TaskInput \n                          onDataSaved={() => setRefreshTrigger(prev => prev + 1)}\n                          tasks={tasks}\n                          employees={employees}\n                          setTasks={setTasks}\n                          setEmployees={setEmployees}\n                        />\n                      </ProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/goals\" element={\n                      <ProtectedRoute \n                        allowedRoles={[ROLES.ADMIN, ROLES.MANAGER]}\n                        isAuthenticated={isAuthenticated}\n                        userRole={userRole}\n                      >\n                        <GoalList />\n                      </ProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/goals/setting\" element={\n                      <ProtectedRoute\n                        allowedRoles={[ROLES.ADMIN, ROLES.MANAGER]}\n                        isAuthenticated={isAuthenticated}\n                        userRole={userRole}\n                      >\n                        <GoalSetting />\n                      </ProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/goals/input\" element={\n                      <ProtectedRoute\n                        allowedRoles={[ROLES.ADMIN, ROLES.MANAGER]}\n                        isAuthenticated={isAuthenticated}\n                        userRole={userRole}\n                      >\n                        <GoalInput />\n                      </ProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/admin/roles\" element={\n                      <ProtectedRoute\n                        allowedRoles={[ROLES.ADMIN]}\n                        isAuthenticated={isAuthenticated}\n                        userRole={userRole}\n                      >\n                        <AdminRoleManager currentUserRole={userRole} />\n                      </ProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/privacy-policy\" element={<PrivacyPolicy />} />\n                    <Route path=\"/terms-of-service\" element={<TermsOfService />} />\n                    <Route \n                      path=\"/unauthorized\" \n                      element={\n                        <div className=\"flex items-center justify-center min-h-screen bg-red-100\">\n                          <div className=\"bg-white p-8 rounded-lg shadow-md text-center\">\n                            <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Access Denied</h2>\n                            <p className=\"text-gray-700 mb-6\">You do not have permission to access this page.</p>\n                            <button \n                              onClick={() => window.location.href = '/'} \n                              className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition\"\n                            >\n                              Return to Home\n                            </button>\n                          </div>\n                        </div>\n                      } \n                    />\n                  </>\n                )}\n              </Routes>\n            </ErrorBoundary>\n          </main>\n        </div>\n      </BrowserRouter>\n    </ErrorBoundary>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}