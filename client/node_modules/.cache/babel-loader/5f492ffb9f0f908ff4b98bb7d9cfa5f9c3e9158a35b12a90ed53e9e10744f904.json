{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';import{ROLES}from'../config/roles';const initialState={isAuthenticated:false,user:null,userRole:null,error:null};const authSlice=createSlice({name:'auth',initialState,reducers:{loginSuccess:(state,action)=>{const{user,authenticated,userRole}=action.payload;// Robust role assignment\nconst processedRole=userRole?typeof userRole==='object'?userRole.role||userRole.name||'guest':userRole:'guest';console.log('AuthSlice - Login Success:',{user,authenticated,processedRole});state.isAuthenticated=authenticated;state.user=user;state.userRole=processedRole.toLowerCase();state.error=null;},logout:state=>{state.isAuthenticated=false;state.user=null;state.userRole=null;state.error=null;}}});export const{loginSuccess,logout}=authSlice.actions;export default authSlice.reducer;","map":{"version":3,"names":["createSlice","ROLES","initialState","isAuthenticated","user","userRole","error","authSlice","name","reducers","loginSuccess","state","action","authenticated","payload","processedRole","role","console","log","toLowerCase","logout","actions","reducer"],"sources":["C:/Users/belya/Cursor projects/Budget tracker/client/src/store/authSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { ROLES } from '../config/roles';\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  user: null,\r\n  userRole: null,\r\n  error: null\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    loginSuccess: (state, action) => {\r\n      const { user, authenticated, userRole } = action.payload;\r\n      \r\n      // Robust role assignment\r\n      const processedRole = userRole \r\n        ? (typeof userRole === 'object' \r\n          ? (userRole.role || userRole.name || 'guest') \r\n          : userRole)\r\n        : 'guest';\r\n\r\n      console.log('AuthSlice - Login Success:', {\r\n        user,\r\n        authenticated,\r\n        processedRole\r\n      });\r\n\r\n      state.isAuthenticated = authenticated;\r\n      state.user = user;\r\n      state.userRole = processedRole.toLowerCase();\r\n      state.error = null;\r\n    },\r\n    logout: (state) => {\r\n      state.isAuthenticated = false;\r\n      state.user = null;\r\n      state.userRole = null;\r\n      state.error = null;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { loginSuccess, logout } = authSlice.actions;\r\nexport default authSlice.reducer; "],"mappings":"AAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,KAAK,KAAQ,iBAAiB,CAEvC,KAAM,CAAAC,YAAY,CAAG,CACnBC,eAAe,CAAE,KAAK,CACtBC,IAAI,CAAE,IAAI,CACVC,QAAQ,CAAE,IAAI,CACdC,KAAK,CAAE,IACT,CAAC,CAED,KAAM,CAAAC,SAAS,CAAGP,WAAW,CAAC,CAC5BQ,IAAI,CAAE,MAAM,CACZN,YAAY,CACZO,QAAQ,CAAE,CACRC,YAAY,CAAEA,CAACC,KAAK,CAAEC,MAAM,GAAK,CAC/B,KAAM,CAAER,IAAI,CAAES,aAAa,CAAER,QAAS,CAAC,CAAGO,MAAM,CAACE,OAAO,CAExD;AACA,KAAM,CAAAC,aAAa,CAAGV,QAAQ,CACzB,MAAO,CAAAA,QAAQ,GAAK,QAAQ,CAC1BA,QAAQ,CAACW,IAAI,EAAIX,QAAQ,CAACG,IAAI,EAAI,OAAO,CAC1CH,QAAQ,CACV,OAAO,CAEXY,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAE,CACxCd,IAAI,CACJS,aAAa,CACbE,aACF,CAAC,CAAC,CAEFJ,KAAK,CAACR,eAAe,CAAGU,aAAa,CACrCF,KAAK,CAACP,IAAI,CAAGA,IAAI,CACjBO,KAAK,CAACN,QAAQ,CAAGU,aAAa,CAACI,WAAW,CAAC,CAAC,CAC5CR,KAAK,CAACL,KAAK,CAAG,IAAI,CACpB,CAAC,CACDc,MAAM,CAAGT,KAAK,EAAK,CACjBA,KAAK,CAACR,eAAe,CAAG,KAAK,CAC7BQ,KAAK,CAACP,IAAI,CAAG,IAAI,CACjBO,KAAK,CAACN,QAAQ,CAAG,IAAI,CACrBM,KAAK,CAACL,KAAK,CAAG,IAAI,CACpB,CACF,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CAAEI,YAAY,CAAEU,MAAO,CAAC,CAAGb,SAAS,CAACc,OAAO,CACzD,cAAe,CAAAd,SAAS,CAACe,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}